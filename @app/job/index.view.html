{#function() 
	return require("job/page/home")(page)
end#}
<html>
	<head>
		<title></title>
		
		<!-- #include(css.ht) -->

		<script type="text/javascript" src="/static/job/page/home.js"></script>

	</head>
	<body class="ui-body ui-job">
		<div class="ui-job-right">
			<div class="ui-navbar"></div>
		</div>
		<div class="ui-job-left">
			<div class="ui-list">
				<div kk-each="versions" class="ui-list-item kk-view">
					<input type="hidden" name="hash" kk-key="version" class="kk-job-version" />
					<div class="kk-item-content">
						<div class="kk-title"><span class="kk-status" kk-key="status,Page.status"></span><span>#{{version}} {{title}}</span></div>
						<div class="ui-progress" kk-key="status,kk.view.visible,1"><span kk-key="progress,Page.progress"></span></div>
						<div class="kk-subtitle">{{ctime,ui.date.format,yyyy-MM-dd HH:mm:ss}}</div>
					</div>
				</div>
			</div>
			<div class="ui-navbar">
				<div class="ui-leftbar">
					<span>{#page.job.title#}</span>
				</div>
				<div class="ui-rightbar">
					<a class="ui-button" href="#"><span class="ui-icon icon-arrows-ccw"></span></a>
					<a class="ui-button" href="#"><span class="ui-icon icon-plus"></span></a>
				</div>
			</div>
		</div>
		<script type="text/javascript">

			Page = {}

			Page.progress = function(value) {
				this.style.width = value +"%";
			};

			Page.status = function(value) {
				$(this).removeClass("progress").removeClass("ok").removeClass("fail");
				if(value == 1) {
					$(this).addClass("progress");
				}
				else if(value == 200) {
					$(this).addClass("ok");
				}
				else if(value == 300 || value == 400) {
					$(this).addClass("fail");
				}
			};

			page = {#kk.json.encode(page)#};
			view = kk.view(document.body);
			view.set("versions",page.versions || []);
		</script>
	</body>
</html>
